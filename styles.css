:root{
  --vh: 1dvh; /* будет переопределено из JS */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
  --safe-left: env(safe-area-inset-left, 0px);

  /* Тема по умолчанию (classic) */
  --bg: #0f172a;
  --panel: #111827;
  --text: #e5e7eb;
  --board-light:#d6b07b; --board-dark:#6b4a32;
  --piece-light:#fff6e8; --piece-dark:#8b1e1e;
  --accent:#ffd166;
}

html, body{ height:100%; overflow:hidden; overscroll-behavior:none; background:var(--bg); color:var(--text); }

#app.app-root{
  position:fixed; inset:0;
  display:grid; gap:8px;
  grid-template-rows:auto 1fr auto; /* header / content / footer */
  padding: calc(var(--safe-top) + 6px) calc(var(--safe-right) + 10px)
           calc(var(--safe-bottom) + 10px) calc(var(--safe-left) + 10px);
}

.header{ display:flex; align-items:center; gap:8px; }
.header .title{ font-weight:700; }
.btn-ghost{ background:rgba(255,255,255,0.08); border:0; border-radius:12px; padding:8px 12px; color:var(--text); }

.content{ min-height:0; }
.view{ width:100%; height:100%; }
.view[hidden]{ display:none !important; }

.game{
  min-height:0;
  display:grid;
  place-items:center;
  grid-template-columns: 1fr;
  grid-auto-rows:minmax(0,1fr);
  gap:12px;
}

.board-wrap{
  position:relative;
  width:100%;
  height:100%;
  max-width:100%;
  max-height:100%;
}
.board{ position:absolute; inset:0; aspect-ratio:1/1; }
.board canvas{width:100%;height:100%;display:block;}

.side-panel{ width:100%; }

.footer{ min-height:56px; }
.controls{ display:grid; grid-auto-flow:column; gap:8px; }
.btn{ border:0; border-radius:14px; padding:10px 14px; background:#3a4352; color:#fff; }
.btn-primary{ background: var(--accent); color:#2b2b2b; }

.settings-form{
  min-height:0;
  overflow:auto;
  background:var(--panel);
  border-radius:16px;
  padding:16px;
}
.settings-form fieldset{ border:0; margin:0 0 16px; }
.settings-form legend{ font-weight:700; margin-bottom:8px; }

/* Жесты управляем сами */
.board, .board *{ touch-action:none; }

/* Планшет/десктоп: игра + панель/настройки рядом */
@media (min-width:820px) and (orientation:landscape){
  .game{ grid-template-columns:minmax(0,1fr) 320px; align-items:center; }
  .settings-form{ height:100%; }
}

/* Classic (уже задан переменными по умолчанию) */
body.theme-classic{}

/* Новый Walnut — тёплая палитра, контрастнее и светлее доска */
body.theme-walnut{
  --bg:#0e0f12;
  --panel:#151820;
  --text:#f1f5f9;
  --board-light:#c9a66b;    /* светлое тёплое дерево */
  --board-dark:#5a3a1c;     /* тёмный орех */
  --piece-light:#f5efe3;    /* слоновая кость */
  --piece-dark:#7d2a1f;     /* терракотовый красный */
  --accent:#ffc857;         /* янтарная кнопка */
}

/* Graphite — тёмная индустриальная тема */
body.theme-graphite{
  --bg:#0b0d12;
  --panel:#0f1115;
  --text:#e4e6eb;
  --board-light:#2b2f36;
  --board-dark:#1a1d23;
  --piece-light:#e7e7e7;
  --piece-dark:#b13232;
  --accent:#9ac6ff;
}
